{{- if .Values.testfunctions.enabled }}

apiVersion: "f2s.opensight.ch/v1alpha1"
kind: "Function"
metadata:
  name: "test-function-nonblocking"
  namespace: "f2s"
spec:
  endpoint: "/testnonblocking"
  method: "GET"
  description: |
    Blocking Function
    * 1 container can handle a many request at once in parallel
    * one request will take a random time from 200ms up to 5000ms to complete
target:
  containerImage: "romanhuesler/testcontainer"
  endpoint: "/"
  port: 3000
  minReplicas: 1
  maxReplicas: 5
---
apiVersion: "f2s.opensight.ch/v1alpha1"
kind: "Function"
metadata:
  name: "test-function-blocking"
  namespace: "f2s"
spec:
  endpoint: "/testblocking"
  method: "GET"
  description: |
    Blocking Function
    * 1 container can only handle a single request at once
    * one request will take a random time from 200ms up to 5000ms to complete
target:
  containerImage: "romanhuesler/testcontainer"
  endpoint: "/blocking"
  port: 3000
  minReplicas: 1
  maxReplicas: 5

{{- end }}